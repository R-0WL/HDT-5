{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from'chart.js';import{Line}from'react-chartjs-2';import axios from'axios';// Registrar componentes necesarios para Chart.js\nimport{jsx as _jsx}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);// Componente personalizado para barras de error\nconst ErrorBar=_ref=>{let{ctx,xPos,yPos,yError,color}=_ref;// Dibujar línea vertical para error\nctx.save();ctx.beginPath();ctx.moveTo(xPos,yPos-yError);ctx.lineTo(xPos,yPos+yError);ctx.strokeStyle=color;ctx.lineWidth=2;ctx.stroke();// Dibujar pequeñas líneas horizontales en los extremos\nctx.beginPath();ctx.moveTo(xPos-5,yPos-yError);ctx.lineTo(xPos+5,yPos-yError);ctx.moveTo(xPos-5,yPos+yError);ctx.lineTo(xPos+5,yPos+yError);ctx.stroke();ctx.restore();};const Graph=_ref2=>{let{url,title,colors,refreshTrigger}=_ref2;const[chartData,setChartData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchData=async()=>{try{setLoading(true);const response=await axios.get(`http://localhost:8000${url}`);// Configurar datos para Chart.js\nconst data={labels:[25,50,100,150,200],// Números de procesos\ndatasets:response.data.series.map((series,index)=>({label:series.name,data:series.data.map(point=>point.y),backgroundColor:colors[index%colors.length],borderColor:colors[index%colors.length],borderWidth:2,tension:0.4,// Guardar valores de desviación estándar para uso posterior\nerrorBars:series.data.map(point=>point.std)}))};setChartData(data);setError(null);}catch(err){console.error('Error fetching graph data:',err);setError('No se pudieron cargar los datos de la gráfica');}finally{setLoading(false);}};fetchData();},[url,colors,refreshTrigger]);// Añadido refreshTrigger a las dependencias\n// Resto del código sigue igual...\nif(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"h-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-800\",children:\"Cargando gr\\xE1fica...\"})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"h-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:error})});if(!chartData)return/*#__PURE__*/_jsx(\"div\",{className:\"h-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-800\",children:\"No hay datos disponibles\"})});const options={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'},title:{display:true,text:title,color:'rgb(30, 64, 175)',font:{size:14}},tooltip:{callbacks:{label:function(context){const label=context.dataset.label||'';const value=context.parsed.y||0;const std=context.dataset.errorBars[context.dataIndex]||0;return`${label}: ${value.toFixed(2)} ± ${std.toFixed(2)}`;}}}},scales:{y:{beginAtZero:true,title:{display:true,text:'Tiempo Promedio'}},x:{title:{display:true,text:'Número de Procesos'}}},// Plugin personalizado para dibujar barras de error\nplugins:[{id:'errorBars',afterDatasetsDraw(chart){const{ctx,scales}=chart;chart.data.datasets.forEach((dataset,datasetIndex)=>{if(!dataset.errorBars)return;const meta=chart.getDatasetMeta(datasetIndex);meta.data.forEach((element,index)=>{const{x,y}=element.tooltipPosition();const yScale=scales.y;const std=dataset.errorBars[index];if(std){const yError=Math.abs(yScale.getPixelForValue(y+std)-yScale.getPixelForValue(y));ErrorBar({ctx,xPos:x,yPos:y,yError:yError,color:dataset.borderColor});}});});}}]};return/*#__PURE__*/_jsx(\"div\",{className:\"h-full w-full\",children:/*#__PURE__*/_jsx(Line,{data:chartData,options:options})});};export default Graph;","map":{"version":3,"names":["React","useState","useEffect","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Line","axios","jsx","_jsx","register","ErrorBar","_ref","ctx","xPos","yPos","yError","color","save","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","restore","Graph","_ref2","url","title","colors","refreshTrigger","chartData","setChartData","loading","setLoading","error","setError","fetchData","response","get","data","labels","datasets","series","map","index","label","name","point","y","backgroundColor","length","borderColor","borderWidth","tension","errorBars","std","err","console","className","children","options","responsive","maintainAspectRatio","plugins","legend","position","display","text","font","size","tooltip","callbacks","context","dataset","value","parsed","dataIndex","toFixed","scales","beginAtZero","x","id","afterDatasetsDraw","chart","forEach","datasetIndex","meta","getDatasetMeta","element","tooltipPosition","yScale","Math","abs","getPixelForValue"],"sources":["C:/Users/Fatima/Desktop/PROGRA/HDT-5/simulador-so/frontend/src/components/results/Graph.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\r\nimport { Line } from 'react-chartjs-2';\r\nimport axios from 'axios';\r\n\r\n// Registrar componentes necesarios para Chart.js\r\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\r\n\r\n// Componente personalizado para barras de error\r\nconst ErrorBar = ({ ctx, xPos, yPos, yError, color }) => {\r\n  // Dibujar línea vertical para error\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  ctx.moveTo(xPos, yPos - yError);\r\n  ctx.lineTo(xPos, yPos + yError);\r\n  ctx.strokeStyle = color;\r\n  ctx.lineWidth = 2;\r\n  ctx.stroke();\r\n  \r\n  // Dibujar pequeñas líneas horizontales en los extremos\r\n  ctx.beginPath();\r\n  ctx.moveTo(xPos - 5, yPos - yError);\r\n  ctx.lineTo(xPos + 5, yPos - yError);\r\n  ctx.moveTo(xPos - 5, yPos + yError);\r\n  ctx.lineTo(xPos + 5, yPos + yError);\r\n  ctx.stroke();\r\n  ctx.restore();\r\n};\r\n\r\nconst Graph = ({ url, title, colors, refreshTrigger }) => {\r\n  const [chartData, setChartData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await axios.get(`http://localhost:8000${url}`);\r\n        \r\n        // Configurar datos para Chart.js\r\n        const data = {\r\n          labels: [25, 50, 100, 150, 200], // Números de procesos\r\n          datasets: response.data.series.map((series, index) => ({\r\n            label: series.name,\r\n            data: series.data.map(point => point.y),\r\n            backgroundColor: colors[index % colors.length],\r\n            borderColor: colors[index % colors.length],\r\n            borderWidth: 2,\r\n            tension: 0.4,\r\n            // Guardar valores de desviación estándar para uso posterior\r\n            errorBars: series.data.map(point => point.std)\r\n          })),\r\n        };\r\n        \r\n        setChartData(data);\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error('Error fetching graph data:', err);\r\n        setError('No se pudieron cargar los datos de la gráfica');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [url, colors, refreshTrigger]); // Añadido refreshTrigger a las dependencias\r\n\r\n  // Resto del código sigue igual...\r\n\r\n  if (loading) return (\r\n    <div className=\"h-full flex items-center justify-center\">\r\n      <div className=\"text-blue-800\">Cargando gráfica...</div>\r\n    </div>\r\n  );\r\n  \r\n  if (error) return (\r\n    <div className=\"h-full flex items-center justify-center\">\r\n      <div className=\"text-red-500\">{error}</div>\r\n    </div>\r\n  );\r\n  \r\n  if (!chartData) return (\r\n    <div className=\"h-full flex items-center justify-center\">\r\n      <div className=\"text-blue-800\">No hay datos disponibles</div>\r\n    </div>\r\n  );\r\n\r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n      },\r\n      title: {\r\n        display: true,\r\n        text: title,\r\n        color: 'rgb(30, 64, 175)',\r\n        font: {\r\n          size: 14\r\n        }\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: function(context) {\r\n            const label = context.dataset.label || '';\r\n            const value = context.parsed.y || 0;\r\n            const std = context.dataset.errorBars[context.dataIndex] || 0;\r\n            return `${label}: ${value.toFixed(2)} ± ${std.toFixed(2)}`;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    scales: {\r\n      y: {\r\n        beginAtZero: true,\r\n        title: {\r\n          display: true,\r\n          text: 'Tiempo Promedio'\r\n        }\r\n      },\r\n      x: {\r\n        title: {\r\n          display: true,\r\n          text: 'Número de Procesos'\r\n        }\r\n      }\r\n    },\r\n    // Plugin personalizado para dibujar barras de error\r\n    plugins: [{\r\n      id: 'errorBars',\r\n      afterDatasetsDraw(chart) {\r\n        const { ctx, scales } = chart;\r\n        \r\n        chart.data.datasets.forEach((dataset, datasetIndex) => {\r\n          if (!dataset.errorBars) return;\r\n          \r\n          const meta = chart.getDatasetMeta(datasetIndex);\r\n          \r\n          meta.data.forEach((element, index) => {\r\n            const { x, y } = element.tooltipPosition();\r\n            const yScale = scales.y;\r\n            const std = dataset.errorBars[index];\r\n            \r\n            if (std) {\r\n              const yError = Math.abs(yScale.getPixelForValue(y + std) - yScale.getPixelForValue(y));\r\n              ErrorBar({\r\n                ctx,\r\n                xPos: x,\r\n                yPos: y,\r\n                yError: yError,\r\n                color: dataset.borderColor\r\n              });\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }]\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full w-full\">\r\n      <Line data={chartData} options={options} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Graph;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}